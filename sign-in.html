<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In - Saint Admin</title>
    <link rel="icon" href="/03b3cf7a14673a4735184b5cfc73428e.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/+esm'
        import { supabaseConfig } from '/config.js'

        const supabase = createClient(supabaseConfig.url, supabaseConfig.anonKey)

        async function checkAuth() {
            const { data: { session } } = await supabase.auth.getSession()
            if (session) {
                window.location.href = '/dashboard'
            } else {
                setTimeout(() => {
                    initiateDiscordLogin()
                }, 1000)
            }
        }

        async function initiateDiscordLogin() {
            const { data, error } = await supabase.auth.signInWithOAuth({
                provider: 'discord',
                options: {
                    redirectTo: `${window.location.origin}/dashboard`
                }
            })

            if (error) {
                console.error('Error signing in:', error)
                document.getElementById('error-message').classList.remove('hidden')
                document.getElementById('error-text').textContent = error.message
            }
        }

        window.signInWithDiscord = initiateDiscordLogin
        window.addEventListener('DOMContentLoaded', checkAuth)
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .gradient-bg {
            background: linear-gradient(-45deg, #0a0a0a, #1a0a0a, #0a0a0a, #1a0505);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        .floating-icon {
            animation: float 6s ease-in-out infinite;
        }

        .grid-pattern {
            background-image:
                linear-gradient(rgba(239, 68, 68, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(239, 68, 68, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .sign-in-card {
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            background: linear-gradient(135deg, rgba(10, 10, 10, 0.9), rgba(15, 15, 15, 0.9));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(239, 68, 68, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
                        0 0 40px rgba(239, 68, 68, 0.1);
        }

        .discord-button {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #5865F2, #4752C4);
        }

        .discord-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .discord-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .discord-button:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 40px rgba(88, 101, 242, 0.4);
        }

        .discord-button:active {
            transform: translateY(0) scale(0.98);
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #5865F2;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .glow-text {
            text-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
        }

        .feature-item {
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateX(5px);
            color: #ef4444;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4 grid-pattern">
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="floating-icon absolute top-20 left-20 w-16 h-16 bg-red-500/10 rounded-full blur-xl"></div>
        <div class="floating-icon absolute bottom-20 right-20 w-24 h-24 bg-red-500/10 rounded-full blur-xl" style="animation-delay: -2s;"></div>
        <div class="floating-icon absolute top-1/2 left-1/3 w-20 h-20 bg-red-500/10 rounded-full blur-xl" style="animation-delay: -4s;"></div>
    </div>

    <div class="sign-in-card max-w-md w-full rounded-2xl p-8 relative z-10">
        <div class="text-center mb-8">
            <div class="flex justify-center mb-4">
                <img src="/03b3cf7a14673a4735184b5cfc73428e.png" alt="Saint Admin" class="h-20 w-20 rounded-xl shadow-lg shadow-red-500/30">
            </div>
            <h1 class="text-4xl font-bold text-white mb-2 glow-text">Saint Admin</h1>
            <p class="text-gray-400 text-sm">Sign in to access your dashboard</p>
        </div>

        <div id="loading-state" class="text-center py-6">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-gray-400 text-sm">Redirecting to Discord...</p>
        </div>

        <div id="error-message" class="hidden mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-xl">
            <div class="flex items-start">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400 mt-0.5 mr-3 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                </svg>
                <div>
                    <h3 class="text-red-300 font-medium text-sm mb-1">Authentication Error</h3>
                    <p id="error-text" class="text-red-200 text-xs"></p>
                </div>
            </div>
        </div>

        <button onclick="signInWithDiscord()" class="discord-button w-full py-4 px-6 rounded-xl font-semibold text-white text-lg flex items-center justify-center space-x-3 shadow-lg">
            <span class="relative z-10 flex items-center space-x-3">
                <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515a.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0a12.64 12.64 0 00-.617-1.25a.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057a19.9 19.9 0 005.993 3.03a.078.078 0 00.084-.028a14.09 14.09 0 001.226-1.994a.076.076 0 00-.041-.106a13.107 13.107 0 01-1.872-.892a.077.077 0 01-.008-.128a10.2 10.2 0 00.372-.292a.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127a12.299 12.299 0 01-1.873.892a.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028a19.839 19.839 0 006.002-3.03a.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
                <span>Sign in with Discord</span>
            </span>
        </button>

        <div class="mt-8 pt-6 border-t border-gray-800">
            <h3 class="text-sm font-semibold text-gray-400 mb-4">Features you'll get access to:</h3>
            <ul class="space-y-3">
                <li class="feature-item flex items-start text-gray-300 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400 mr-3 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    Powerful Roblox script executor
                </li>
                <li class="feature-item flex items-start text-gray-300 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400 mr-3 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    Server-side administration tools
                </li>
                <li class="feature-item flex items-start text-gray-300 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400 mr-3 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    Access to multiple game scripts
                </li>
                <li class="feature-item flex items-start text-gray-300 text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400 mr-3 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    Real-time updates and notifications
                </li>
            </ul>
        </div>

        <div class="mt-6 text-center">
            <p class="text-xs text-gray-500">
                By signing in, you agree to our Terms of Service and Privacy Policy
            </p>
        </div>
    </div>
</body>
</html>
